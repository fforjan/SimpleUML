<!DOCTYPE html>
<html>
  <head>
  <meta charset='utf-8'/>
  <script src='./scripts/jquery-2.0.0.min.js'></script>
  <script src='./scripts/coffee-script.js'></script>
  <script src='./scripts/jumly.min.js'></script>
  <link href="main.css" rel="stylesheet">
</head>
<body>
   
    <script>
var sample1 = '@found "User", ->\n  @message "search", "Browser", ->\n    @create asynchronous:"connection", "Web Server"\n    @message "GET", "Web Server", ->\n      @message "find the resource", -> @reply ""\n    @reply "", "User"';
var sample2 = '@found "You", ->\n  @alt\n    "[found]": ->\n      @loop ->\n        @message "request", "HTTP Server"\n        @note "NOTE: This doesn\'t make sense :)"\n    "[missing]": ->\n      @message "new", "HTTP Session"\n  @ref "respond resource"';

    var updateJumly = function() {
       $('footer#status').text('ok');
      try {
        JUMLY["eval"]($("textarea#umlDocument"), {
          into: $("div#renderer")
        });
     } catch (_error) {
        ex = _error;
        $('footer#status').text(ex);
     }
    };
    
    var loadDocument = function(document) {
      $("textarea#umlDocument").text(document);
      updateJumly();
    };
    
  </script>
</body>

<div class="wrapper">
	<div class="middle">

		<div class="container">
			<main class="content">
				
        <textarea id='umlDocument'>
@found "You", ->
  @message "get", "JUMLY"
  </textarea><br/>
  <button onclick="updateJumly()">Update !</button>
 
  <div id='renderer'></div>
        </main><!-- .content -->
		</div><!-- .container-->

		<aside class="left-sidebar">
			<div class='file' onclick="loadDocument(sample1)">Sample 1</div>
      <div class='file' onclick="loadDocument(sample2)">Sample 2</div>
      </aside><!-- .left-sidebar -->

	</div><!-- .middle-->

</div><!-- .wrapper -->

<footer class="footer" id='status'>
	
  </footer><!-- .footer -->

 </html>