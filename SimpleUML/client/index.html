<!DOCTYPE html>
<html>
  <head>
  <meta charset='utf-8'/>
  <script src='./scripts/jquery-2.0.0.min.js'></script>
  <script src='./scripts/coffee-script.js'></script>
  <script src='./scripts/jumly.min.js'></script>
  <link href="main.css" rel="stylesheet">
</head>
<body>
   
    <script>
var sample1 = '@found "User", ->\n  @message "search", "Browser", ->\n    @create asynchronous:"connection", "Web Server"\n    @message "GET", "Web Server", ->\n      @message "find the resource", -> @reply ""\n    @reply "", "User"';
var sample2 = '@found "You", ->\n  @alt\n    "[found]": ->\n      @loop ->\n        @message "request", "HTTP Server"\n        @note "NOTE: This doesn\'t make sense :)"\n    "[missing]": ->\n      @message "new", "HTTP Session"\n  @ref "respond resource"';

    var updateJumly = function() {
       $('div#status').text('ok');
      try {
        JUMLY["eval"]($("textarea#umlDocument"), {
          into: $("div#renderer")
        });
     } catch (_error) {
        ex = _error;
        $('div#status').text(ex);
     }
    };
    
    var loadDocument = function(document) {
      $("textarea#umlDocument").text(document);
      updateJumly();
    };
    
  </script>
</body>

<table>
  <tr>
    <td rowspan=2 class='left'>
      <div class='file' onclick="loadDocument(sample1)">Sample 1</div>
      <div class='file' onclick="loadDocument(sample2)">Sample 2</div>
    </td>
    <td class='mainTop'>
      <textarea id='umlDocument'></textarea><br/>
      <button onclick="updateJumly()">Update !</button>
    </td>
  </tr>
  <tr>
    <td class='mainBottom'>
    <div id='renderer'></div>
      </td>
  </tr>
  <tr>
    <td class='status' rowspan="2">
      <div id='status'/>
    </td>
  </tr>
</table>
 </html>